
<launch>
<param name="/use_sim_time" value="true" />

<group>
  <env name="ROS_MASTER_URI" value="http://localhost:11311" />

  <node name="playbag_1" pkg="rosbag" type="play"
      args="-r 2 --clock $(env HOME)/Downloads/cartographer_freight_demo.bag" />
  <node name="cartographer_grpc_bridge_1" pkg="cartographer_ros"
      type="cartographer_grpc_node" args="
          -configuration_directory $(find cartographer_fetch)/configuration_files
          -configuration_basename freight_simulation.lua
          -server_address localhost:50051"
      output="screen">
    <remap from="scan" to="base_scan" />
  </node>
  <node name="cartographer_grpc_server_1" pkg="cartographer_ros"
      type="cartographer_grpc_server.sh" args="
          -configuration_directory $(find cartographer_fetch)/configuration_files
          -configuration_basename freight_simulation_robot_server_1.lua">
  </node>

  <node name="rviz_1" pkg="rviz" type="rviz" required="true"
      args="-d $(find cartographer_fetch)/configuration_files/demo.rviz" />
</group>

<group>
  <env name="ROS_MASTER_URI" value="http://localhost:11312" />

  <node name="playbag_2" pkg="rosbag" type="play"
      args="-r 2 --clock $(env HOME)/Downloads/cartographer_freight_demo_2.bag" />
  <node name="cartographer_grpc_bridge_2" pkg="cartographer_ros"
      type="cartographer_grpc_node" args="
          -configuration_directory $(find cartographer_fetch)/configuration_files
          -configuration_basename freight_simulation.lua
          -server_address localhost:50052"
      output="screen">
    <remap from="scan" to="base_scan" />
  </node>
  <node name="cartographer_grpc_server_2" pkg="cartographer_ros"
      type="cartographer_grpc_server.sh" args="
          -configuration_directory $(find cartographer_fetch)/configuration_files
          -configuration_basename freight_simulation_robot_server_2.lua">
  </node>

  <node name="rviz_2" pkg="rviz" type="rviz" required="true"
      args="-d $(find cartographer_fetch)/configuration_files/demo.rviz" />
</group>

<group>
  <env name="ROS_MASTER_URI" value="http://localhost:11313" />
  <node name="cartographer_grpc_cloud" pkg="cartographer_ros"
      type="cartographer_grpc_server.sh" args="
          -configuration_directory $(find cartographer_fetch)/configuration_files
          -configuration_basename cloud_server.lua">
  </node>
  <node name="cartographer_grpc_bridge_cloud" pkg="cartographer_ros"
      type="cartographer_grpc_node" args="
          -configuration_directory $(find cartographer_fetch)/configuration_files
          -configuration_basename freight_simulation.lua
          -server_address localhost:50100"
      output="screen">
    <remap from="scan" to="base_scan" />
  </node>
  <node name="rviz_cloud" pkg="rviz" type="rviz" required="true"
      args="-d $(find cartographer_fetch)/configuration_files/demo.rviz" />
</group>
</launch>


